<mat-toolbar color="primary">
  <span>Minhas Tarefas</span>
  <span class="toolbar-spacer"></span>
  <button mat-icon-button (click)="logout()" aria-label="Sair">
    <mat-icon>logout</mat-icon>
  </button>
</mat-toolbar>

@if (loading()) {
  <mat-progress-bar mode="indeterminate" aria-label="Carregando tarefas"></mat-progress-bar>
}

<div class="todo-list">
  @if (error()) {
    <mat-card class="todo-list__error">
      <mat-card-content>
        <p>{{ error() }}</p>
      </mat-card-content>
    </mat-card>
  }

  <div class="todo-list__controls">
    <div class="todo-list__summary">
      <h2 class="todo-list__summary-title">Resumo</h2>
      <p class="todo-list__summary-count">{{ completedCount() }} de {{ tasks().length }} conclu√≠das</p>
    </div>
    <app-task-filter [categories]="categories" />
  </div>

  <div class="todo-list__main">
    <div class="todo-list__form-container">
      <app-add-task-form [categories]="categories" (taskAdded)="handleTaskAdded($event)" />
    </div>
    <div class="todo-list__list-container">
      @if (filteredTasks()) {
        <app-task-list
          [tasks]="filteredTasks()"
          [editingTaskId]="editingTaskId()"
          [categories]="categories"
          (toggleComplete)="handleToggleComplete($event)"
          (delete)="handleDelete($event)"
          (edit)="handleEdit($event)"
          (save)="handleSave($event)"
          (cancel)="handleCancelEdit()"
        />
      }
    </div>
  </div>
</div>